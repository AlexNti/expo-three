{"version":3,"file":"loaderClassForExtension.js","sourceRoot":"","sources":["../src/loaderClassForExtension.ts"],"names":[],"mappings":"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","sourcesContent":["import THREE from './Three';\n\nfunction getExtension(uri: string): string {\n  const lastUriComponent = uri.split('.').pop() as string;\n  return lastUriComponent.split('?')[0].split('#')[0];\n}\n\nexport function loaderClassForUri(uri: string): string {\n  const extension = getExtension(uri);\n  return loaderClassForExtension(extension);\n}\n\nexport function loaderClassForExtension(extension: string): any {\n  if (typeof extension !== 'string') {\n    throw new Error('Supplied extension is not a valid string');\n  }\n  switch (extension.toLowerCase()) {\n    case '3mf': {\n      const loaderName = 'ThreeMFLoader';\n      if (!THREE[loaderName]) {\n        try {\n          require('three/examples/js/loaders/3MFLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    case 'amf': {\n      const loaderName = 'AMFLoader';\n      if (!THREE[loaderName]) {\n        try {\n          require('./loaders/AMFLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    case 'assimp': {\n      const loaderName = 'AssimpLoader';\n      if (!THREE[loaderName]) {\n        try {\n          require('three/examples/js/loaders/AssimpLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    case 'bvh': {\n      const loaderName = 'BVHLoader';\n\n      if (!THREE[loaderName]) {\n        try {\n          require('three/examples/js/loaders/BVHLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    case 'ctm':\n      throw new Error(\n        'CTMLoader is deprecated. Please load it manually with three.js',\n      );\n    case 'fbx':\n      // @ts-ignore\n      if (!THREE.FBXLoader) {\n        try {\n          require('three/examples/js/libs/inflate.min');\n          require('three/examples/js/loaders/FBXLoader');\n        } catch (_) {}\n      }\n      // @ts-ignore\n      return THREE.FBXLoader;\n    case 'glb':\n    case 'gltf':\n      // @ts-ignore\n      if (!THREE.GLTFLoader) {\n        try {\n          require('three/examples/js/loaders/GLTFLoader');\n        } catch (_) {}\n      }\n      // @ts-ignore\n      return THREE.GLTFLoader;\n    case 'max':\n    case '3ds':\n      // @ts-ignore\n      if (!THREE.TDSLoader) {\n        try {\n          require('three/examples/js/loaders/TDSLoader');\n        } catch (_) {}\n      }\n      // @ts-ignore\n      return THREE.TDSLoader;\n    case 'pcd': {\n      const loaderName = 'PCDLoader';\n      if (!THREE[loaderName]) {\n        try {\n          require('three/examples/js/loaders/PCDLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    case 'ply': {\n      const loaderName = 'PLYLoader';\n      if (!THREE[loaderName]) {\n        try {\n          require('three/examples/js/loaders/PLYLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    case 'obj':\n      // @ts-ignore\n      if (!THREE.OBJLoader) {\n        try {\n          require('three/examples/js/loaders/OBJLoader');\n        } catch (_) {}\n      }\n      // @ts-ignore\n      return THREE.OBJLoader;\n    case 'mtl':\n      // @ts-ignore\n      if (!THREE.MTLLoader) {\n        try {\n          require('three/examples/js/loaders/MTLLoader');\n        } catch (_) {}\n      }\n      // @ts-ignore\n      return THREE.MTLLoader;\n    case 'dae':\n      // @ts-ignore\n      if (!THREE.ColladaLoader) {\n        try {\n          require('three/examples/js/loaders/ColladaLoader');\n        } catch (_) {}\n      }\n      // @ts-ignore\n      return THREE.ColladaLoader;\n    case 'stl':\n      // @ts-ignore\n      if (!THREE.STLLoader) {\n        try {\n          require('three/examples/js/loaders/STLLoader');\n        } catch (_) {}\n      }\n      // @ts-ignore\n      return THREE.STLLoader;\n    case 'vtk':\n    case 'vtp': {\n      const loaderName = 'VTKLoader';\n      if (!THREE[loaderName]) {\n        try {\n          require('three/examples/js/loaders/VTKLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    case 'x': {\n      const loaderName = 'XLoader';\n      if (!THREE[loaderName]) {\n        try {\n          require('three/examples/js/loaders/XLoader');\n        } catch (_) {}\n      }\n      return THREE[loaderName];\n    }\n    // case 'drc':\n    //   if (!THREE.DRACOLoader) require('three/examples/js/loaders/draco/DRACOLoader');\n    //   return THREE.DRACOLoader;\n    default:\n      throw new Error(\n        'ExpoTHREE.loaderClassForExtension(): Unrecognized file type ' +\n          extension,\n      );\n  }\n}\n"]}